# 소코반 게임 구현 과정

## 1단계

### 요구 사항

* Map 데이터를 입력 받고 2차원 배열에 정보를 저장한다.
  - 입력 구분
    - Stage + 번호
        - 스테이지 시작 구분
    - \# : 저장값 0
        - 벽
    - O : 저장값 1
        - 구멍
    - o : 저장값 2
        - 공
    - P : 저장값 3
        - 플레이어
    - = : 저장값 4
        - 스테이지 구분
    - " " : 저장값 -1
        - 비어있는 공간 구분. 이동 가능한 공간
    

* 배열에 저장 된 정보를 통해 각 스테이지 정보를 출력한다.

### 구현

**Map** : 스테이지 값, Map의 배열이 저장되는 2차원 배열과, Map의 정보가 저장되는 MapInfo를 필드값으로 갖는다.

**MapInfo** : Map의 상세정보. 가로크기, 세로크기, 구멍의 수, 공의 수, 플레이어 위치를 필드값으로 갖는다.

**Main** : 함수 실행을 위한 Main클래스

1. Map에 들어갈 데이터 입력받기
  - getMapData() 함수를 통해 지도에 들어갈 데이터 값을 BufferedReader에 저장하여 반환.

2. 입력받은 데이터를 2차원 배열로 저장
  - createStageMap() 함수를 통해 접근 하고자 하는 스테이지와 해당 스테이지의 Map정보를 Map객체에 저장한다.
    - 파라미터 값으로 접근하고자 하는 currentStage의 값을 받는다. 1스테이지부터 시작하여 버퍼값을 한 줄씩 읽으며 "="으로 시작하는 라인을 찾고 해당하는 경우에 Map객체의 stage값을 한 단계씩 증가 시킨다.
      - Map객체의 stage값과 파라미터 currentStage값이 일치할 경우, 요구 사항과 일치하는 저장값을 2차원 배열에 저장한다. 동시에 MapInfo에 정보를 저장한다.
      - 더 이상 읽을 버퍼값이 존재하지 않거나, 다음 Stage 구분값인 "="를 만날 경우, 함수를 종료한다.
      - 존재하지 않는 Stage의 값을 파라미터로 전달할 경우 예외 처리.

3. 각 스테이지의 정보 출력
  - viewMapInfo() 함수를 통해 Map객체에 생성되어 있는 스테이지의 Map배열과 Map정보를 출력한다.

## 2단계

### 요구 사항

- 프로그램 실행 시 스테이지2의 지도를 출력
- 간단한 프롬프트 ex) SOKOBAN> 표시
- 하나 이상의 문자를 입력받을 경우 순서대로 처리하여, 단계 별 상태를 출력
- 벽이나 공 등의 다른 물체에 부딪히면 해당 명령을 수행할 수 없습니다 라는 메세지를 출력하고, 플레이어를 움직이지 않는다.


- 입력명령
  - w: 위쪽
  - a: 왼쪽
  - s: 아래쪽
  - d: 오른쪽
  - q: 프로그램 종료
  
### 구현

**Controller** : Map객체, 이동명령 값, 이동 성공여부를 필드값으로 갖는다.

**Main -> Game** : Main클래스의 이름을 Game으로 변경.

1. Game클래스 Start() 함수의 파라미터 값으로 Stage값을 입력받아 해당 Stage의 Map객체를 반환.


2. Game클래스의 Main 함수는 UI출력을 담당한다. 이동명령 값이 'q'일 경우, loof 탈출


3. Controller클래스 생성자를 통해 Map객체, 이동명령 값을 전달하여 Map객체를 조작 및 이동 성공여부를 저장하여 Controller객체를 반환.
  - 'w' 위쪽 이동의 경우, MapInfo에서 현재 플레이어 위치를 가져오고, 해당 좌표값에서 y축 값을 -1하여 해당 위치의 2차원 배열 값이 -1(공백)인 경우에만 이동을 허용한다.
  - 's' 아래쪽 이동의 경우, MapInfo에서 현재 플레이어 위치를 가져오고, 해당 좌표값에서 y축 값을 +1하여 해당 위치의 2차원 배열 값이 -1(공백)인 경우에만 이동을 허용한다.
  - 'a' 왼쪽 이동의 경우, MapInfo에서 현재 플레이어 위치를 가져오고, 해당 좌표값에서 x축 값을 -1하여 해당 위치의 2차원 배열 값이 -1(공백)인 경우에만 이동을 허용한다.
  - 'd' 오른쪽 이동의 경우, MapInfo에서 현재 플레이어 위치를 가져오고, 해당 좌표값에서 x축 값을 +1하여 해당 위치의 2차원 배열 값이 -1(공백)인 경우에만 이동을 허용한다.

## 3단계